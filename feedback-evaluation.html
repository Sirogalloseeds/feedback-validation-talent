<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluaci√≥n del Feedback - Seeds</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8f9fa;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: #333;
        }

        .container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
            max-width: 900px;
            width: 100%;
            min-height: 600px;
            overflow: hidden;
            position: relative;
            border: 1px solid #e9ecef;
        }

        .header {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="20" cy="20" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="40" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="40" cy="80" r="1" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.1;
        }

        .seeds-logo {
            max-width: 200px;
            height: auto;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
            filter: brightness(0) invert(1);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 12px;
            font-weight: 700;
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
            font-weight: 400;
        }

        .content {
            padding: 40px;
            max-height: 70vh;
            overflow-y: auto;
        }

        .question-card {
            background: #ffffff;
            border-radius: 12px;
            padding: 32px;
            margin-bottom: 28px;
            border: 1px solid #e5e7eb;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
            transition: all 0.2s ease;
        }

        .question-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transform: translateY(-1px);
        }

        .question-card h3 {
            color: #1f2937;
            margin-bottom: 20px;
            font-size: 1.25em;
            font-weight: 600;
            line-height: 1.4;
        }

        .question-card h2 {
            color: #1f2937;
            margin-bottom: 24px;
            font-size: 1.5em;
            font-weight: 700;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 12px;
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 20px 0;
        }

        .radio-option {
            display: flex;
            align-items: center;
            padding: 16px 20px;
            background: #f9fafb;
            border-radius: 10px;
            border: 2px solid #e5e7eb;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .radio-option:hover {
            border-color: #10b981;
            background: #ecfdf5;
            transform: translateY(-1px);
        }

        .radio-option input {
            margin-right: 14px;
            transform: scale(1.2);
            accent-color: #10b981;
        }

        .radio-option.selected {
            border-color: #10b981;
            background: #10b981;
            color: white;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.25);
        }

        .textarea-field {
            width: 100%;
            padding: 16px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-family: inherit;
            font-size: 1em;
            resize: vertical;
            min-height: 120px;
            margin: 16px 0;
            transition: border-color 0.2s ease;
            background: #f9fafb;
        }

        .textarea-field:focus {
            outline: none;
            border-color: #10b981;
            background: white;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: block;
            margin: 32px auto 0;
            min-width: 200px;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.25);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(16, 185, 129, 0.35);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .report-content {
            line-height: 1.7;
            color: #374151;
            font-size: 1.05em;
            background: #f8f9fa;
            padding: 24px;
            border-radius: 12px;
            border-left: 4px solid #10b981;
            margin-bottom: 24px;
        }

        .report-content h2 {
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 32px 0 20px 0;
            color: #1f2937;
            font-size: 1.4em;
            font-weight: 700;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 12px;
        }

        .report-content h2:first-child {
            margin-top: 0;
        }

        .report-content ul {
            margin: 20px 0;
            padding-left: 24px;
        }

        .report-content li {
            margin-bottom: 12px;
            line-height: 1.6;
        }

        .report-content strong {
            color: #1f2937;
            font-weight: 600;
        }

        .report-content p {
            margin-bottom: 16px;
            text-align: justify;
        }

        .success-animation {
            text-align: center;
            padding: 60px 20px;
        }

        .success-icon {
            font-size: 4em;
            margin-bottom: 24px;
            animation: bounce 1s ease-in-out;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-30px); }
            60% { transform: translateY(-15px); }
        }

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 24px;
            color: #6b7280;
            font-weight: 500;
        }

        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid #e5e7eb;
            border-top: 3px solid #10b981;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .hidden {
            display: none;
        }

        .candidate-info {
            background: #ecfdf5;
            border: 1px solid #10b981;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
            text-align: center;
            color: #064e3b;
        }

        .candidate-info strong {
            color: #064e3b;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 12px;
            }
            
            .header {
                padding: 28px 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .content {
                padding: 24px 20px;
            }

            .question-card {
                padding: 24px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Pantalla principal -->
        <div id="main-screen">
            <div class="header">
                <img src="seeds-logo.png" alt="Seeds" class="seeds-logo">
                <h1>Evaluaci√≥n del Feedback</h1>
                <p>Ay√∫danos a mejorar nuestros reportes de feedback</p>
            </div>
            <div class="content">
                <!-- Info del candidato -->
                <div id="candidate-info" class="candidate-info hidden">
                    <strong>üìã Reporte de feedback para:</strong><br>
                    Candidato: <span id="candidate-name"></span>
                </div>

                <!-- Reporte de feedback -->
                <div class="question-card">
                    <h2>Tu Reporte de Feedback</h2>
                    <div class="report-content" id="report-content">
                        <!-- El contenido del reporte se carga aqu√≠ din√°micamente -->
                    </div>
                </div>
                
                <!-- Encuesta de evaluaci√≥n -->
                <div class="question-card">
                    <h2>Evaluaci√≥n del Feedback</h2>
                    
                    <!-- Utilidad -->
                    <div style="margin-bottom: 32px;">
                        <h3>¬øQu√© tan √∫til te result√≥ para entender fortalezas y √°reas de mejora?</h3>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="utility" value="very_useful">
                                <span>Muy √∫til</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="utility" value="useful">
                                <span>√ötil</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="utility" value="neutral">
                                <span>Neutral</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="utility" value="not_very_useful">
                                <span>Poco √∫til</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="utility" value="not_useful">
                                <span>Nada √∫til</span>
                            </label>
                        </div>
                    </div>

                    <!-- Claridad -->
                    <div style="margin-bottom: 32px;">
                        <h3>¬øEl feedback fue claro y f√°cil de entender?</h3>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="clarity" value="very_clear">
                                <span>S√≠, muy claro y f√°cil de entender</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="clarity" value="partially_clear">
                                <span>Parcialmente, algunas partes no quedaron claras</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="clarity" value="not_clear">
                                <span>No, fue confuso o dif√≠cil de entender</span>
                            </label>
                        </div>
                    </div>

                    <!-- Precisi√≥n -->
                    <div style="margin-bottom: 32px;">
                        <h3>¬øCu√°n acertado crees que es el feedback sobre tu perfil y sobre tu performance en la entrevista?</h3>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="accuracy" value="very_accurate">
                                <span>Muy acertado</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="accuracy" value="somewhat_accurate">
                                <span>Algo acertado</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="accuracy" value="not_very_accurate">
                                <span>Poco acertado</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="accuracy" value="not_accurate">
                                <span>Nada acertado</span>
                            </label>
                        </div>
                    </div>

                    <!-- Nivel de detalle -->
                    <div style="margin-bottom: 32px;">
                        <h3>¬øEl nivel de detalle fue‚Ä¶?</h3>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="detailLevel" value="superficial">
                                <span>Superficial - Necesitaba m√°s detalles</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="detailLevel" value="adequate">
                                <span>Adecuado - El nivel correcto de detalle</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="detailLevel" value="too_extensive">
                                <span>Demasiado extenso - Muy detallado</span>
                            </label>
                        </div>
                    </div>

                    <!-- Mejoras y sugerencias -->
                    <div style="margin-bottom: 32px;">
                        <h3>Comparte qu√© informaci√≥n adicional te gustar√≠a ver en futuros reportes</h3>
                        <textarea class="textarea-field" name="improvements" placeholder="¬øQu√© te gustar√≠a que incluyamos m√°s en los reportes? ¬øQu√© falt√≥ en el feedback que te hubiera gustado ver?"></textarea>
                    </div>

                    <button class="btn" onclick="submitEvaluation()" disabled id="submit-btn">Enviar Evaluaci√≥n</button>
                </div>
            </div>
        </div>

        <!-- Pantalla de √©xito -->
        <div id="success-screen" class="hidden">
            <div class="header">
                <img src="seeds-logo.png" alt="Seeds" class="seeds-logo">
                <h1>¬°Evaluaci√≥n Completada!</h1>
                <p>Gracias por ayudarnos a mejorar</p>
            </div>
            <div class="content">
                <div class="success-animation">
                    <div class="success-icon">üéâ</div>
                    <h2 style="color: #333; margin-bottom: 20px;">¬°Muchas gracias!</h2>
                    <p style="color: #666; font-size: 1.1em; line-height: 1.6; margin-bottom: 20px;">
                        Tu evaluaci√≥n del feedback es muy valiosa para nosotros. Nos ayuda a mejorar continuamente 
                        la calidad y utilidad de nuestros reportes para futuros candidatos.
                    </p>
                    <p style="color: #666; margin-top: 20px;">
                        ¬°√âxitos en tu b√∫squeda laboral!
                    </p>
                </div>
            </div>
        </div>

        <!-- Loading overlay -->
        <div id="loading-overlay" class="hidden" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.9); align-items: center; justify-content: center; display: none;">
            <div class="loading">
                <div class="spinner"></div>
                <span>Guardando evaluaci√≥n...</span>
            </div>
        </div>
    </div>

    <script>
        // Reporte de feedback por defecto
        const defaultFeedbackReport = `
<h2>üåü Resumen General</h2>
<p>Demostraste un perfil s√≥lido durante la entrevista, con buena comunicaci√≥n y conocimientos t√©cnicos relevantes para la posici√≥n. Se nota tu experiencia y capacidad para enfrentar desaf√≠os profesionales de manera estructurada.</p>

<h2>üí™ Fortalezas</h2>
<ul>
<li><strong>Comunicaci√≥n efectiva:</strong> expresaste tus ideas de manera clara y estructurada durante la conversaci√≥n.</li>
<li><strong>Experiencia t√©cnica:</strong> demostraste conocimientos s√≥lidos y actualizados en tu √°rea de especializaci√≥n.</li>
<li><strong>Actitud positiva:</strong> mostraste entusiasmo genuino y ganas de aprender y crecer profesionalmente.</li>
<li><strong>Capacidad de an√°lisis:</strong> abordaste los problemas planteados de manera l√≥gica y met√≥dica.</li>
</ul>

<h2>üîç Oportunidades de Mejora</h2>
<ul>
<li><strong>Ejemplos espec√≠ficos:</strong> podr√≠as enriquecer tus respuestas con m√°s casos concretos y resultados medibles de tu experiencia.</li>
<li><strong>Curiosidad sobre la empresa:</strong> mostrar m√°s inter√©s haciendo preguntas sobre el equipo, la cultura y los desaf√≠os del rol.</li>
<li><strong>Profundidad t√©cnica:</strong> en algunas respuestas podr√≠as haber profundizado m√°s en los aspectos t√©cnicos y metodol√≥gicos.</li>
</ul>

<h2>üí° Sugerencias para Futuras Entrevistas</h2>
<ol>
<li><strong>Preparar casos de √©xito:</strong> desarrolla 3-4 ejemplos STAR (Situaci√≥n, Tarea, Acci√≥n, Resultado) con m√©tricas espec√≠ficas.</li>
<li><strong>Investigar la empresa:</strong> prepara preguntas inteligentes que demuestren inter√©s genuino en la organizaci√≥n.</li>
<li><strong>Practicar storytelling:</strong> trabaja en comunicar tus logros de manera m√°s narrativa y engaging.</li>
<li><strong>Destacar impacto:</strong> enf√≥cate en c√≥mo tus contribuciones generaron valor tangible en proyectos anteriores.</li>
</ol>

<p>üëâ <strong>Conclusi√≥n:</strong> Tienes un perfil prometedor con bases s√≥lidas y gran potencial de crecimiento. Con algunos ajustes en la preparaci√≥n y presentaci√≥n, podr√°s destacar a√∫n m√°s en futuros procesos de selecci√≥n.</p>
        `;

        // Estado de respuestas
        let responses = {
            candidateId: generateUniqueId(),
            timestamp: new Date().toISOString(),
            // Datos del candidato (si vienen en URL)
            candidateName: null,
            reportId: null,
            // Evaluaci√≥n del feedback
            utility: null,
            clarity: null,
            accuracy: null,
            detailLevel: null,
            improvements: null
        };

        function generateUniqueId() {
            return 'evaluation_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now();
        }

        function loadReportContent() {
            const reportContainer = document.getElementById('report-content');
            
            // Si hay un reportId en la URL, intentar cargar desde localStorage
            if (responses.reportId) {
                console.log('üîç Buscando reporte con ID:', responses.reportId);
                
                try {
                    const reportData = localStorage.getItem(responses.reportId);
                    
                    if (reportData) {
                        const parsedData = JSON.parse(reportData);
                        console.log('‚úÖ Reporte encontrado:', parsedData);
                        
                        // Cargar el HTML del reporte
                        reportContainer.innerHTML = parsedData.html;
                        
                        // Actualizar el nombre del candidato si no estaba en la URL
                        if (!responses.candidateName && parsedData.candidate) {
                            responses.candidateName = parsedData.candidate;
                            document.getElementById('candidate-name').textContent = parsedData.candidate;
                            document.getElementById('candidate-info').classList.remove('hidden');
                        }
                        
                        console.log('üìÑ Reporte personalizado cargado exitosamente');
                        return;
                        
                    } else {
                        console.warn('‚ö†Ô∏è No se encontr√≥ reporte en localStorage con ID:', responses.reportId);
                    }
                    
                } catch (error) {
                    console.error('‚ùå Error al cargar reporte desde localStorage:', error);
                }
            }
            
            // Si no hay reportId o no se pudo cargar, usar reporte por defecto
            console.log('üìù Cargando reporte por defecto');
            reportContainer.innerHTML = defaultFeedbackReport;
        }

        function debugLocalStorage() {
            console.log('üîç Contenido de localStorage:');
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key && key.startsWith('report_')) {
                    const data = localStorage.getItem(key);
                    try {
                        console.log(`${key}:`, JSON.parse(data));
                    } catch (e) {
                        console.log(`${key}: Error parsing data`);
                    }
                }
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.add('hidden');
                loadingOverlay.style.display = 'none';
            }
            
            loadParametersFromURL();
            loadReportContent();
            setupEventListeners();
            
            console.log('‚úÖ Sistema de evaluaci√≥n de feedback cargado');
        });

        function loadParametersFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            
            responses.reportId = urlParams.get('reportId');
            responses.candidateName = urlParams.get('candidate');

            // Mostrar info del candidato si existe
            if (responses.candidateName) {
                const infoDiv = document.getElementById('candidate-info');
                document.getElementById('candidate-name').textContent = responses.candidateName || 'No especificado';
                infoDiv.classList.remove('hidden');
            }

            console.log('üìã Par√°metros cargados:', {
                reportId: responses.reportId,
                candidate: responses.candidateName
            });
        }

        function setupEventListeners() {
            // Radio buttons
            setupRadioListeners('utility');
            setupRadioListeners('clarity');
            setupRadioListeners('accuracy');
            setupRadioListeners('detailLevel');

            // Textarea
            document.querySelector('textarea[name="improvements"]').addEventListener('input', function() {
                responses.improvements = this.value;
                checkFormComplete();
            });
        }

        function setupRadioListeners(name) {
            document.querySelectorAll(`input[name="${name}"]`).forEach(radio => {
                radio.addEventListener('change', function() {
                    updateRadioStyles(this);
                    responses[name] = this.value;
                    checkFormComplete();
                });
            });
        }

        function updateRadioStyles(selectedRadio) {
            selectedRadio.closest('.radio-group').querySelectorAll('.radio-option').forEach(option => {
                option.classList.remove('selected');
            });
            selectedRadio.closest('.radio-option').classList.add('selected');
        }

        function checkFormComplete() {
            const required = ['utility', 'clarity', 'accuracy', 'detailLevel'];
            const isComplete = required.every(field => responses[field] !== null);
            document.getElementById('submit-btn').disabled = !isComplete;
        }

        async function submitEvaluation() {
            showLoading(true);
            
            try {
                await saveToGoogleSheets({
                    ...responses,
                    surveyType: 'feedback_evaluation',
                    timestamp: new Date().toISOString()
                });

                showScreen('success-screen');
                
            } catch (error) {
                console.error('Error al guardar evaluaci√≥n:', error);
                alert('Hubo un error al procesar tu evaluaci√≥n. Por favor intenta de nuevo.');
            } finally {
                showLoading(false);
            }
        }

        async function saveToGoogleSheets(data) {
            try {
                console.log('üìä Datos a guardar:', data);
                
                // Obtener IP primero
                const userIP = await getUserIP().catch(() => 'No disponible');
                
                const enrichedData = {
                    ...data,
                    ipAddress: userIP,
                    userAgent: navigator.userAgent,
                    url: window.location.href
                };
                
                console.log('üì¶ Datos enriquecidos:', enrichedData);
                
                return await new Promise((resolve, reject) => {
                    const callbackName = 'jsonp_callback_' + Math.round(100000 * Math.random());
                    const timeoutId = setTimeout(() => {
                        cleanup();
                        reject(new Error('Timeout: No response from server'));
                    }, 15000);
                    
                    const cleanup = () => {
                        if (window[callbackName]) {
                            delete window[callbackName];
                        }
                        const script = document.getElementById(callbackName);
                        if (script) {
                            script.remove();
                        }
                        clearTimeout(timeoutId);
                    };
                    
                    window[callbackName] = function(response) {
                        cleanup();
                        console.log('‚úÖ Respuesta de Google Sheets:', response);
                        if (response && response.success) {
                            resolve(response);
                        } else {
                            reject(new Error(response?.error || 'Error desconocido en la respuesta'));
                        }
                    };
                    
                    // CAMBIAR ESTA URL POR LA DE TU GOOGLE APPS SCRIPT
                    const baseUrl = 'https://script.google.com/macros/s/AKfycbyzGVZHeiN1Z0PBy-xn75PrkRcSA4rYmcE-SKBNhSQ6lRnByVrVaGKEqdPO3CJQ_6nb/exec';
                    const params = new URLSearchParams({
                        callback: callbackName,
                        data: JSON.stringify(enrichedData)
                    });
                    
                    const fullUrl = `${baseUrl}?${params.toString()}`;
                    console.log('üîó URL completa:', fullUrl.substring(0, 150) + '...');
                    
                    const script = document.createElement('script');
                    script.id = callbackName;
                    script.src = fullUrl;
                    
                    script.onerror = (error) => {
                        cleanup();
                        console.error('‚ùå Error cargando script:', error);
                        reject(new Error('Error loading script - posible problema de red o URL'));
                    };
                    
                    script.onload = () => {
                        console.log('üì° Script cargado exitosamente');
                    };
                    
                    document.head.appendChild(script);
                });
                
            } catch (error) {
                console.error('‚ùå Error al guardar en Google Sheets:', error);
                throw error;
            }
        }

        async function getUserIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                return 'No disponible';
            }
        }

        function showScreen(screenId) {
            document.querySelectorAll('.container > div').forEach(screen => {
                screen.classList.add('hidden');
            });
            document.getElementById(screenId).classList.remove('hidden');
        }

        function showLoading(show) {
            const overlay = document.getElementById('loading-overlay');
            if (overlay) {
                if (show) {
                    overlay.classList.remove('hidden');
                    overlay.style.display = 'flex';
                } else {
                    overlay.classList.add('hidden');
                    overlay.style.display = 'none';
                }
            }
        }

        // Sistema para cargar reportes personalizados
        window.feedbackEvaluation = {
            loadCustomReport: function(reportHTML) {
                const reportContainer = document.getElementById('report-content');
                if (reportContainer) {
                    reportContainer.innerHTML = reportHTML;
                    console.log('‚úÖ Reporte personalizado cargado via API');
                }
            },
            
            getCurrentResponses: function() {
                return responses;
            }
        };

        // Funci√≥n para debugging desde consola
        window.debugFeedback = {
            checkLocalStorage: debugLocalStorage,
            showCurrentData: () => console.log('Current responses:', responses),
            loadCustomReport: (html) => {
                document.getElementById('report-content').innerHTML = html;
            },
            testReport: () => {
                const testHTML = `<h2>üß™ Reporte de Prueba</h2><p>Este es un reporte de prueba cargado correctamente.</p>`;
                document.getElementById('report-content').innerHTML = testHTML;
            }
        };

        console.log('üöÄ Sistema de evaluaci√≥n de feedback iniciado');
        console.log('üÜî ID de evaluaci√≥n:', responses.candidateId);
        if (responses.reportId) {
            console.log('üìã Report ID:', responses.reportId);
            console.log('üë§ Candidato:', responses.candidateName || 'No especificado');
        }
    </script>
</body>
</html>
